buildscript {
    repositories {
        jcenter()
    }
    dependencies {
        classpath 'com.github.jengelman.gradle.plugins:shadow:2.0.4'
    }
}

apply plugin: 'com.github.johnrengelman.shadow'
apply plugin: 'java'
apply plugin: 'application'

mainClassName = 'net.stratfordpark.pco.Main'

sourceCompatibility = 1.8
targetCompatibility = 1.8

repositories {
	mavenCentral()
}

dependencies {
	compile group: 'com.sparkjava', name: 'spark-core', version: '2.7.2'
	compile group: 'com.sparkjava', name: 'spark-template-freemarker', version: '2.7.1'

    compile group: 'com.squareup.okhttp3', name: 'okhttp', version: '3.10.0'

    compile group: 'com.squareup.moshi', name: 'moshi', version: '1.5.0'
    compile group: 'com.squareup.moshi', name: 'moshi-adapters', version: '1.5.0'

	compile 'org.slf4j:slf4j-api:1.7.25'
	runtime 'org.slf4j:log4j-over-slf4j:1.7.25'
	runtime 'org.slf4j:slf4j-simple:1.7.25'
}

jar {
    baseName 'pco-kiosk'
    manifest {
        attributes("Main-Class": "net.stratfordpark.pco.Main" )
    }
}


task saveLibs(type: Sync) {
    from configurations.runtime
    into "$buildDir/libs/dependencies"
}
jar.dependsOn saveLibs

shadowJar {
	baseName = 'pco-kiosk'
}